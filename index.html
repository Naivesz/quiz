<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeopardy Quiz Show Deluxe - OBS Overlay</title>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Kanit:wght@600;800;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --blue-dark: #020617;
            --blue-main: #0a192f;
            --blue-card: #1e3a8a;
            --blue-highlight: #3b82f6;
            --red-accent: #e11d48;
            --green-success: #22c55e;
            --text-gold: #fde047;
            --font-show: 'Anton', sans-serif;
            --font-text: 'Kanit', sans-serif;
        }

        html, body {
            background-color: transparent !important;
            margin: 0; padding: 0;
            height: 100vh; width: 100vw;
            overflow: hidden;
            color: white;
            font-family: var(--font-text);
            display: flex; flex-direction: column;
        }

        #flash-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 2000;
            opacity: 0; transition: opacity 0.1s ease-out;
        }

        .top-bar {
            display: grid; grid-template-columns: 20% 1fr 20%; 
            align-items: center; padding: 10px 30px;
            background: var(--blue-dark); border-bottom: 3px solid var(--blue-highlight);
            flex-shrink: 0; z-index: 1100;
        }

        .gm-cam-slot {
            width: 100%; aspect-ratio: 16/9;
            background: transparent !important;
            border: 3px solid var(--red-accent); border-radius: 10px; position: relative;
        }

        .gm-label {
            position: absolute; bottom: -10px; left: 50%; transform: translateX(-50%);
            background: var(--red-accent); padding: 2px 15px; font-size: 0.8rem;
            font-family: var(--font-show); border-radius: 4px;
        }

        .nav-controls { text-align: center; }
        .logo-text { font-family: var(--font-show); font-size: 2.2rem; color: var(--text-gold); margin: 0; }

        .btn-nav {
            background: var(--blue-card); border: 1px solid var(--blue-highlight);
            color: white; padding: 5px 15px; font-family: var(--font-show);
            cursor: pointer; margin: 5px 2px; border-radius: 4px;
        }

        .btn-nav.active { background: var(--blue-highlight); box-shadow: 0 0 10px var(--blue-highlight); }
        .btn-reset { background: var(--red-accent); border: none; color: white; padding: 8px 15px; font-family: var(--font-show); cursor: pointer; border-radius: 4px; }

        #board-container { position: relative; flex-grow: 1; display: flex; flex-direction: column; overflow: hidden; }

        #game-board {
            display: grid; grid-template-columns: repeat(6, 1fr);
            gap: 10px; padding: 15px 30px; background: var(--blue-dark); height: 100%;
        }

        .category-header {
            background: linear-gradient(to bottom, var(--red-accent), #991b1b);
            padding: 10px 5px; text-align: center; font-family: var(--font-show);
            font-size: 1.1rem; text-transform: uppercase; border-radius: 6px;
            display: flex; align-items: center; justify-content: center;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .quiz-card {
            background: linear-gradient(145deg, var(--blue-card), var(--blue-main));
            border: 2px solid var(--blue-highlight); border-radius: 6px;
            display: flex; align-items: center; justify-content: center;
            font-size: 2rem; font-family: var(--font-show); color: var(--text-gold); cursor: pointer;
        }

        .quiz-card.used { opacity: 0.05; cursor: default; }

        .player-area {
            display: grid; grid-template-columns: repeat(5, 1fr);
            gap: 15px; padding: 15px 30px;
            background: var(--blue-dark); border-top: 5px solid var(--blue-highlight);
            flex-shrink: 0; z-index: 1100;
        }

        .player-slot {
            aspect-ratio: 16/9; background: transparent !important;
            border: 2px solid #333; position: relative; border-radius: 8px;
        }

        .player-slot.active-buzzer { border-color: var(--red-accent); box-shadow: 0 0 20px var(--red-accent); }
        .player-slot.selecting { border-color: var(--text-gold); border-style: dashed; }

        .player-info {
            position: absolute; bottom: 0; width: 100%;
            background: rgba(225, 29, 72, 0.95); text-align: center;
            font-weight: 900; font-size: 1rem; padding: 5px 0; text-transform: uppercase;
        }

        #question-overlay {
            display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(2, 6, 23, 0.95); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            z-index: 1050; flex-direction: column; align-items: center; justify-content: center;
        }

        #question-content {
            font-size: 3.2rem; font-weight: 800; max-width: 85%; margin: 20px 0;
            text-align: center; text-shadow: 2px 2px 15px rgba(0,0,0,0.9);
            transition: color 0.3s ease;
        }

        .controls { display: flex; gap: 15px; }
        button { padding: 12px 25px; font-family: var(--font-show); cursor: pointer; border: none; border-radius: 6px; color: white; }
        .btn-correct { background: var(--green-success); }
        .btn-wrong { background: var(--red-accent); }
        .btn-close { background: #475569; }
        #btn-next-round { background: var(--blue-highlight); display: none; margin-top: 20px; font-size: 1.5rem; }
    </style>
</head>
<body>

<audio id="sound-correct" src="correct.mp3"></audio>
<audio id="sound-wrong" src="wrong.mp3"></audio>
<audio id="sound-buzzer" src="buzzer.mp3"></audio>

<div id="flash-overlay"></div>

<div class="top-bar">
    <div class="gm-cam-slot"><div class="gm-label">GAME MASTER</div></div>
    <div class="nav-controls">
        <h1 class="logo-text">QUIZ DUELL</h1>
        <button id="btn-b1" class="btn-nav active" onclick="switchBoard(1)">BOARD 1</button>
        <button id="btn-b2" class="btn-nav" onclick="switchBoard(2)">BOARD 2</button>
    </div>
    <div style="text-align: right;">
        <button class="btn-reset" onclick="resetGame()">RESET</button>
    </div>
</div>

<div id="board-container">
    <div id="game-board"></div>
    <div id="question-overlay">
        <div id="buzzer-status" style="font-family: var(--font-show); font-size: 2rem; color: var(--text-gold); margin-bottom: 10px;"></div>
        <div id="question-content"></div>
        <div class="controls" id="action-controls">
            <button class="btn-correct" onclick="handleAnswer(true)">RICHTIG</button>
            <button class="btn-wrong" onclick="handleAnswer(false)">FALSCH</button>
            <button class="btn-close" onclick="closeQuestion()">ZURÜCK</button>
        </div>
        <button id="btn-next-round" onclick="closeQuestion()">NÄCHSTE RUNDE</button>
    </div>
</div>

<div class="player-area" id="player-area"></div>

<script>
    const boards = {
        1: { 
            "KATEGORIE 1": [{pts:100,q:"Was ist die Hauptstadt von Frankreich?",a:"Paris"},{pts:200,q:"Wie viele Kontinente gibt es?",a:"7"},{pts:300,q:"Wer malte die Mona Lisa?",a:"Leonardo da Vinci"},{pts:500,q:"Was ist das chemische Symbol für Gold?",a:"Au"}],
            "KATEGORIE 2": [{pts:100,q:"Frage?",a:"Antwort"},{pts:200,q:"Frage?",a:"Antwort"},{pts:300,q:"Frage?",a:"Antwort"},{pts:500,q:"Frage?",a:"Antwort"}],
            "KATEGORIE 3": [{pts:100,q:"Frage?",a:"Antwort"},{pts:200,q:"Frage?",a:"Antwort"},{pts:300,q:"Frage?",a:"Antwort"},{pts:500,q:"Frage?",a:"Antwort"}],
            "KATEGORIE 4": [{pts:100,q:"Frage?",a:"Antwort"},{pts:200,q:"Frage?",a:"Antwort"},{pts:300,q:"Frage?",a:"Antwort"},{pts:500,q:"Frage?",a:"Antwort"}],
            "KATEGORIE 5": [{pts:100,q:"Frage?",a:"Antwort"},{pts:200,q:"Frage?",a:"Antwort"},{pts:300,q:"Frage?",a:"Antwort"},{pts:500,q:"Frage?",a:"Antwort"}],
            "KATEGORIE 6": [{pts:100,q:"Frage?",a:"Antwort"},{pts:200,q:"Frage?",a:"Antwort"},{pts:300,q:"Frage?",a:"Antwort"},{pts:500,q:"Frage?",a:"Antwort"}] 
        },
        2: { 
            "EXTRA 1": [{pts:200,q:"Frage?",a:"Antwort"},{pts:400,q:"Frage?",a:"Antwort"},{pts:600,q:"Frage?",a:"Antwort"},{pts:1000,q:"Frage?",a:"Antwort"}],
            "EXTRA 2": [{pts:200,q:"Frage?",a:"Antwort"},{pts:400,q:"Frage?",a:"Antwort"},{pts:600,q:"Frage?",a:"Antwort"},{pts:1000,q:"Frage?",a:"Antwort"}],
            "EXTRA 3": [{pts:200,q:"Frage?",a:"Antwort"},{pts:400,q:"Frage?",a:"Antwort"},{pts:600,q:"Frage?",a:"Antwort"},{pts:1000,q:"Frage?",a:"Antwort"}],
            "EXTRA 4": [{pts:200,q:"Frage?",a:"Antwort"},{pts:400,q:"Frage?",a:"Antwort"},{pts:600,q:"Frage?",a:"Antwort"},{pts:1000,q:"Frage?",a:"Antwort"}],
            "EXTRA 5": [{pts:200,q:"Frage?",a:"Antwort"},{pts:400,q:"Frage?",a:"Antwort"},{pts:600,q:"Frage?",a:"Antwort"},{pts:1000,q:"Frage?",a:"Antwort"}],
            "EXTRA 6": [{pts:200,q:"Frage?",a:"Antwort"},{pts:400,q:"Frage?",a:"Antwort"},{pts:600,q:"Frage?",a:"Antwort"},{pts:1000,q:"Frage?",a:"Antwort"}]
        }
    };

    let players = [
        { name: "Spieler 1", score: 0, locked: false }, { name: "Spieler 2", score: 0, locked: false },
        { name: "Spieler 3", score: 0, locked: false }, { name: "Spieler 4", score: 0, locked: false },
        { name: "Spieler 5", score: 0, locked: false }
    ];

    let currentBoard = 1, usedCards = { 1: [], 2: [] }, currentPoints = 0, activePlayerIndex = null, canBuzz = false, selectingPlayerIndex = 0, currentAnswer = "";

    function initGame() {
        const board = document.getElementById('game-board');
        board.innerHTML = '';
        const data = boards[currentBoard];
        Object.keys(data).forEach(c => {
            const h = document.createElement('div'); h.className = 'category-header'; h.innerText = c; board.appendChild(h);
        });
        for(let i=0; i<4; i++) {
            Object.keys(data).forEach(c => {
                const q = data[c][i] || {pts: (i+1)*100, q: "Frage?", a: "Antwort"};
                const cardId = `${currentBoard}-${c}-${i}`;
                const card = document.createElement('div'); card.className = 'quiz-card';
                if(usedCards[currentBoard].includes(cardId)) card.classList.add('used');
                card.innerText = q.pts;
                card.onclick = () => { if(!card.classList.contains('used')) openQuestion(q, card, cardId); };
                board.appendChild(card);
            });
        }
        updateUI();
    }

    function openQuestion(q, el, id) {
        currentPoints = q.pts; 
        currentAnswer = q.a;
        players.forEach(p => p.locked = false);
        usedCards[currentBoard].push(id);
        el.classList.add('used');
        
        activePlayerIndex = selectingPlayerIndex;
        canBuzz = false; 
        
        document.getElementById('question-content').style.color = "white";
        document.getElementById('action-controls').style.display = "flex";
        document.getElementById('btn-next-round').style.display = "none";
        
        document.getElementById('question-content').innerText = q.q;
        document.getElementById('question-overlay').style.display = 'flex';
        document.getElementById('buzzer-status').innerText = players[activePlayerIndex].name.toUpperCase() + " ANTWORTET...";
        updateUI();
    }

    function handleAnswer(correct) {
        if(activePlayerIndex === null) return;
        if(correct) {
            players[activePlayerIndex].score += currentPoints;
            triggerFlash('green'); playSound('correct');
            selectingPlayerIndex = activePlayerIndex; 
            
            // ANTWORT ANZEIGEN (nur der Text)
            document.getElementById('question-content').innerText = currentAnswer;
            document.getElementById('question-content').style.color = "var(--green-success)";
            document.getElementById('action-controls').style.display = "none";
            document.getElementById('btn-next-round').style.display = "block";
            document.getElementById('buzzer-status').innerText = "RICHTIG!";
        } else {
            players[activePlayerIndex].score -= (currentPoints / 2);
            players[activePlayerIndex].locked = true;
            triggerFlash('red'); playSound('wrong');
            activePlayerIndex = null;
            canBuzz = true; 
            document.getElementById('buzzer-status').innerText = "FALSCH! BUZZER FREI...";
        }
        updateUI();
    }

    function triggerFlash(color) {
        const flash = document.getElementById('flash-overlay');
        flash.style.backgroundColor = color === 'green' ? 'rgba(34, 197, 94, 0.4)' : 'rgba(225, 29, 72, 0.4)';
        flash.style.opacity = '1'; setTimeout(() => flash.style.opacity = '0', 300);
    }

    function playSound(id) { const s = document.getElementById('sound-' + id); if(s) { s.currentTime=0; s.play().catch(()=>{}); } }

    function closeQuestion() { document.getElementById('question-overlay').style.display = 'none'; canBuzz = false; activePlayerIndex = null; updateUI(); }

    function switchBoard(n) { currentBoard = n; document.getElementById('btn-b1').className = n==1?'btn-nav active':'btn-nav'; document.getElementById('btn-b2').className = n==2?'btn-nav active':'btn-nav'; initGame(); }

    function resetGame() { if(confirm("Reset?")){ players.forEach(p=>{p.score=0;p.locked=false;}); usedCards={1:[],2:[]}; initGame(); } }

    function updateUI() {
        const area = document.getElementById('player-area'); area.innerHTML = '';
        players.forEach((p, i) => {
            const s = document.createElement('div');
            s.className = `player-slot ${activePlayerIndex === i ? 'active-buzzer' : ''} ${selectingPlayerIndex === i && activePlayerIndex === null ? 'selecting' : ''}`;
            s.innerHTML = `<div class="player-info">${p.name}: ${p.score}</div>`;
            s.onclick = () => { if(document.getElementById('question-overlay').style.display !== 'flex') { selectingPlayerIndex = i; updateUI(); } };
            area.appendChild(s);
        });
    }

    window.addEventListener('keydown', (e) => {
        const keyMap = { "Digit1": 0, "Digit2": 1, "Digit3": 2, "Digit4": 3, "Digit5": 4 };
        if(canBuzz && keyMap.hasOwnProperty(e.code)) {
            const pIdx = keyMap[e.code];
            if(!players[pIdx].locked) {
                playSound('buzzer');
                activePlayerIndex = pIdx;
                canBuzz = false;
                document.getElementById('buzzer-status').innerText = "GEBUZZERT: " + players[activePlayerIndex].name.toUpperCase();
                updateUI();
            }
        }
    });

    initGame();
</script>
</body>
</html>